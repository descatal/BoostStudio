import{h as T,r as d,j as e,i as P,c as w,a3 as Ge,k as de,b as We,a1 as V}from"./index-_vJHe0oM.js";import{T as pt,a as ht,b as Ae,c as _e}from"./tabs-dpXjghAS.js";import{C as $e,b as Oe,c as Ve,d as Be,a as He}from"./card-5a8OwMZI.js";import{t as qe,F as Ke,a as Ze,b as Xe,c as Je,d as Qe,f as Ye}from"./zod-KirBnuy0.js";import{u as et,z as K}from"./index-Cljsltwk.js";import{u as tt}from"./useMutation-0UaTLUn9.js";import{E as st}from"./enhanced-button-CUT0MAbl.js";import{L as xt,a as vt}from"./index-B04qnfvD.js";import{c as gt,d as jt}from"./react-query.gen-KD5ZsEyq.js";import{X as ue}from"./x-C61GwT2n.js";import{L as at}from"./loader-2-BZ5HxNZN.js";import"./label-5eQ_BX-X.js";const rt=T("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),yt=T("FileArchive",[["path",{d:"M4 22V4c0-.5.2-1 .6-1.4C5 2.2 5.5 2 6 2h8.5L20 7.5V20c0 .5-.2 1-.6 1.4-.4.4-.9.6-1.4.6h-2",key:"1u864v"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}]]),bt=T("FileAudio",[["path",{d:"M17.5 22h.5c.5 0 1-.2 1.4-.6.4-.4.6-.9.6-1.4V7.5L14.5 2H6c-.5 0-1 .2-1.4.6C4.2 3 4 3.5 4 4v3",key:"1013sb"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 20v-1a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0Z",key:"gqt63y"}],["path",{d:"M6 20v-1a2 2 0 1 0-4 0v1a2 2 0 1 0 4 0Z",key:"cf7lqx"}],["path",{d:"M2 19v-3a6 6 0 0 1 12 0v3",key:"1acxgf"}]]),kt=T("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]),Ft=T("FileCog",[["path",{d:"M4 6V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2H4",key:"dba9qu"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"6",cy:"14",r:"3",key:"a1xfv6"}],["path",{d:"M6 10v1",key:"xs0f9j"}],["path",{d:"M6 17v1",key:"idyhc0"}],["path",{d:"M10 14H9",key:"m5fm2q"}],["path",{d:"M3 14H2",key:"19ot09"}],["path",{d:"m9 11-.88.88",key:"lhul2b"}],["path",{d:"M3.88 16.12 3 17",key:"169z9n"}],["path",{d:"m9 17-.88-.88",key:"5io96w"}],["path",{d:"M3.88 11.88 3 11",key:"1ynhy1"}]]),St=T("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Et=T("FileVideo",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]),Ct=T("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),it=T("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),I="FileUpload",Q="FileUploadDropzone",fe="FileUploadTrigger",me="FileUploadList",O="FileUploadItem",pe="FileUploadItemPreview",Y="FileUploadItemMetadata",he="FileUploadItemProgress",ee="FileUploadItemDelete",te="FileUploadClear",ye={[I]:`\`${I}\` must be used as root component`,[Q]:`\`${Q}\` must be within \`${I}\``,[fe]:`\`${fe}\` must be within \`${I}\``,[me]:`\`${me}\` must be within \`${I}\``,[O]:`\`${O}\` must be within \`${I}\``,[pe]:`\`${pe}\` must be within \`${O}\``,[Y]:`\`${Y}\` must be within \`${O}\``,[he]:`\`${he}\` must be within \`${O}\``,[ee]:`\`${ee}\` must be within \`${O}\``,[te]:`\`${te}\` must be within \`${I}\``},Rt=typeof window<"u"?d.useLayoutEffect:d.useEffect;function le(a){const t=d.useRef(a);return Rt(()=>{t.current=a}),t}function je(a){const t=d.useRef(null);return t.current===null&&(t.current=a()),t}const nt=d.createContext(void 0);function wt(a){const t=d.useContext(nt);return a??t??"ltr"}function Nt(a,t,i,o){let s={files:t,dragOver:!1,invalid:o??!1};function r(f,l){switch(l.variant){case"ADD_FILES":{for(const p of l.files)t.set(p,{file:p,progress:0,status:"idle"});if(i){const p=Array.from(t.values()).map(g=>g.file);i(p)}return{...f,files:t}}case"SET_FILES":{const p=new Set(l.files);for(const g of t.keys())p.has(g)||t.delete(g);for(const g of l.files)t.get(g)||t.set(g,{file:g,progress:0,status:"idle"});return{...f,files:t}}case"SET_PROGRESS":{const p=t.get(l.file);return p&&t.set(l.file,{...p,progress:l.progress,status:"uploading"}),{...f,files:t}}case"SET_SUCCESS":{const p=t.get(l.file);return p&&t.set(l.file,{...p,progress:100,status:"success"}),{...f,files:t}}case"SET_ERROR":{const p=t.get(l.file);return p&&t.set(l.file,{...p,error:l.error,status:"error"}),{...f,files:t}}case"REMOVE_FILE":{if(t.delete(l.file),i){const p=Array.from(t.values()).map(g=>g.file);i(p)}return{...f,files:t}}case"SET_DRAG_OVER":return{...f,dragOver:l.dragOver};case"SET_INVALID":return{...f,invalid:l.invalid};case"CLEAR":return t.clear(),i&&i([]),{...f,files:t,invalid:!1};default:return f}}function u(){return s}function n(f){s=r(s,f);for(const l of a)l()}function c(f){return a.add(f),()=>a.delete(f)}return{getState:u,dispatch:n,subscribe:c}}const be=d.createContext(null);be.displayName=I;function ve(a){const t=d.useContext(be);if(!t)throw new Error(ye[a]);return t}function G(a){const t=ve(I),i=je(()=>null),o=d.useCallback(()=>{const h=t.getState(),s=i.current;if(s&&s.state===h)return s.value;const r=a(h);return i.current={value:r,state:h},r},[t,a,i]);return d.useSyncExternalStore(t.subscribe,o,o)}const lt=d.createContext(null);function Z(a){const t=d.useContext(lt);if(!t)throw new Error(ye[a]);return t}const ot=d.forwardRef((a,t)=>{const{value:i,defaultValue:o,onValueChange:h,onAccept:s,onFileAccept:r,onFileReject:u,onFileValidate:n,onUpload:c,accept:f,maxFiles:l,maxSize:p,dir:g,label:R,name:U,asChild:X,disabled:L=!1,invalid:m=!1,multiple:x=!1,required:j=!1,children:b,className:S,...E}=a,D=d.useId(),W=d.useId(),A=d.useId(),M=d.useId(),B=wt(g),v=le(a),Se=je(()=>new Set).current,Ee=je(()=>new Map).current,Ce=d.useRef(null),oe=i!==void 0,k=d.useMemo(()=>Nt(Se,Ee,h,m),[Se,Ee,h,m]),dt=d.useMemo(()=>({dropzoneId:W,inputId:D,listId:A,labelId:M,dir:B,disabled:L,inputRef:Ce}),[W,D,A,M,B,L]);d.useEffect(()=>{oe?k.dispatch({variant:"SET_FILES",files:i}):o&&o.length>0&&!k.getState().files.size&&k.dispatch({variant:"SET_FILES",files:o})},[i,o,oe,k]);const Re=d.useCallback(z=>{var we,Ne,Ie,Pe,Me,ze,Te,Ue,Le,De;if(v.current.disabled)return;let y=[...z],C=!1;if(v.current.maxFiles){const F=k.getState().files.size,N=Math.max(0,v.current.maxFiles-F);if(N<y.length){const $=y.slice(N);C=!0,y=y.slice(0,N);for(const H of $){let J=`Maximum ${v.current.maxFiles} files allowed`;if(v.current.onFileValidate){const ce=v.current.onFileValidate(H);ce&&(J=ce)}(Ne=(we=v.current).onFileReject)==null||Ne.call(we,H,J)}}}const _=[];for(const F of y){let N=!1,$="";if(v.current.onFileValidate){const H=v.current.onFileValidate(F);if(H){$=H,(Pe=(Ie=v.current).onFileReject)==null||Pe.call(Ie,F,$),N=!0,C=!0;continue}}if(v.current.accept){const H=v.current.accept.split(",").map(q=>q.trim()),J=F.type,ce=`.${F.name.split(".").pop()}`;H.some(q=>q===J||q===ce||q.includes("/*")&&J.startsWith(q.replace("/*","/")))||($="File type not accepted",(ze=(Me=v.current).onFileReject)==null||ze.call(Me,F,$),N=!0,C=!0)}v.current.maxSize&&F.size>v.current.maxSize&&($="File too large",(Ue=(Te=v.current).onFileReject)==null||Ue.call(Te,F,$),N=!0,C=!0),N||_.push(F)}if(C&&(k.dispatch({variant:"SET_INVALID",invalid:C}),setTimeout(()=>{k.dispatch({variant:"SET_INVALID",invalid:!1})},2e3)),_.length>0){if(k.dispatch({variant:"ADD_FILES",files:_}),oe&&v.current.onValueChange){const F=Array.from(k.getState().files.values()).map(N=>N.file);v.current.onValueChange([...F])}v.current.onAccept&&v.current.onAccept(_);for(const F of _)(De=(Le=v.current).onFileAccept)==null||De.call(Le,F);v.current.onUpload&&requestAnimationFrame(()=>{ut(_)})}},[k,oe,v]),ut=d.useCallback(async z=>{try{for(const y of z)k.dispatch({variant:"SET_PROGRESS",file:y,progress:0});if(v.current.onUpload)await v.current.onUpload(z,{onProgress:(y,C)=>{k.dispatch({variant:"SET_PROGRESS",file:y,progress:Math.min(Math.max(0,C),100)})},onSuccess:y=>{k.dispatch({variant:"SET_SUCCESS",file:y})},onError:(y,C)=>{k.dispatch({variant:"SET_ERROR",file:y,error:C.message??"Upload failed"})}});else for(const y of z)k.dispatch({variant:"SET_SUCCESS",file:y})}catch(y){const C=y instanceof Error?y.message:"Upload failed";for(const _ of z)k.dispatch({variant:"SET_ERROR",file:_,error:C})}},[k,v.current.onUpload]),ft=d.useCallback(z=>{const y=Array.from(z.target.files??[]);Re(y),z.target.value=""},[Re]),mt=X?P:"div";return e.jsx(nt.Provider,{value:B,children:e.jsx(be.Provider,{value:k,children:e.jsx(lt.Provider,{value:dt,children:e.jsxs(mt,{"data-disabled":L?"":void 0,"data-slot":"file-upload",dir:B,...E,ref:t,className:w("relative flex flex-col gap-2",S),children:[b,e.jsx("input",{type:"file",id:D,"aria-labelledby":M,"aria-describedby":W,ref:Ce,tabIndex:-1,accept:f,name:U,disabled:L,multiple:x,required:j,className:"sr-only",onChange:ft}),e.jsx("span",{id:M,className:"sr-only",children:R??"File upload"})]})})})})});ot.displayName=I;const ke=d.forwardRef((a,t)=>{const{asChild:i,className:o,...h}=a,s=Z(Q),r=ve(Q),u=G(m=>m.dragOver),n=G(m=>m.invalid),c=le(h),f=d.useCallback(m=>{var b,S,E;if((S=(b=c.current)==null?void 0:b.onClick)==null||S.call(b,m),m.defaultPrevented)return;const x=m.target;x instanceof HTMLElement&&x.closest('[data-slot="file-upload-trigger"]')||(E=s.inputRef.current)==null||E.click()},[s.inputRef,c]),l=d.useCallback(m=>{var x,j;(j=(x=c.current)==null?void 0:x.onDragOver)==null||j.call(x,m),!m.defaultPrevented&&(m.preventDefault(),r.dispatch({variant:"SET_DRAG_OVER",dragOver:!0}))},[r,c.current.onDragOver]),p=d.useCallback(m=>{var x,j;(j=(x=c.current)==null?void 0:x.onDragEnter)==null||j.call(x,m),!m.defaultPrevented&&(m.preventDefault(),r.dispatch({variant:"SET_DRAG_OVER",dragOver:!0}))},[r,c.current.onDragEnter]),g=d.useCallback(m=>{var j,b;if((b=(j=c.current)==null?void 0:j.onDragLeave)==null||b.call(j,m),m.defaultPrevented)return;const x=m.relatedTarget;x&&x instanceof Node&&m.currentTarget.contains(x)||(m.preventDefault(),r.dispatch({variant:"SET_DRAG_OVER",dragOver:!1}))},[r,c.current.onDragLeave]),R=d.useCallback(m=>{var S,E;if((E=(S=c.current)==null?void 0:S.onDrop)==null||E.call(S,m),m.defaultPrevented)return;m.preventDefault(),r.dispatch({variant:"SET_DRAG_OVER",dragOver:!1});const x=Array.from(m.dataTransfer.files),j=s.inputRef.current;if(!j)return;const b=new DataTransfer;for(const D of x)b.items.add(D);j.files=b.files,j.dispatchEvent(new Event("change",{bubbles:!0}))},[r,s.inputRef,c.current.onDrop]),U=d.useCallback(m=>{var E,D,W;if((D=(E=c.current)==null?void 0:E.onPaste)==null||D.call(E,m),m.defaultPrevented)return;m.preventDefault(),r.dispatch({variant:"SET_DRAG_OVER",dragOver:!1});const x=(W=m.clipboardData)==null?void 0:W.items;if(!x)return;const j=[];for(let A=0;A<x.length;A++){const M=x[A];if((M==null?void 0:M.kind)==="file"){const B=M.getAsFile();B&&j.push(B)}}if(j.length===0)return;const b=s.inputRef.current;if(!b)return;const S=new DataTransfer;for(const A of j)S.items.add(A);b.files=S.files,b.dispatchEvent(new Event("change",{bubbles:!0}))},[r,s.inputRef,c]),X=d.useCallback(m=>{var x,j,b;(j=(x=c.current)==null?void 0:x.onKeyDown)==null||j.call(x,m),!m.defaultPrevented&&(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),(b=s.inputRef.current)==null||b.click())},[s.inputRef,c.current.onKeyDown]),L=i?P:"div";return e.jsx(L,{role:"region",id:s.dropzoneId,"aria-controls":`${s.inputId} ${s.listId}`,"aria-disabled":s.disabled,"aria-invalid":n,"data-disabled":s.disabled?"":void 0,"data-dragging":u?"":void 0,"data-invalid":n?"":void 0,"data-slot":"file-upload-dropzone",dir:s.dir,tabIndex:s.disabled?void 0:0,...h,ref:t,className:w("relative flex select-none flex-col items-center justify-center gap-2 rounded-lg border-2 border-dashed p-6 outline-none transition-colors hover:bg-accent/30 focus-visible:border-ring/50 data-[disabled]:pointer-events-none data-[dragging]:border-primary data-[invalid]:border-destructive data-[invalid]:ring-destructive/20",o),onClick:f,onDragEnter:p,onDragLeave:g,onDragOver:l,onDrop:R,onKeyDown:X,onPaste:U})});ke.displayName=Q;const Fe=d.forwardRef((a,t)=>{const{asChild:i,...o}=a,h=Z(fe),s=le(o),r=d.useCallback(n=>{var c,f,l;(f=(c=s.current)==null?void 0:c.onClick)==null||f.call(c,n),!n.defaultPrevented&&((l=h.inputRef.current)==null||l.click())},[h.inputRef,s.current]),u=i?P:"button";return e.jsx(u,{type:"button","aria-controls":h.inputId,"data-disabled":h.disabled?"":void 0,"data-slot":"file-upload-trigger",...o,ref:t,disabled:h.disabled,onClick:r})});Fe.displayName=fe;const se=d.forwardRef((a,t)=>{const{className:i,orientation:o="vertical",asChild:h,forceMount:s,...r}=a,u=Z(me),n=s||G(f=>f.files.size>0);if(!n)return null;const c=h?P:"div";return e.jsx(c,{role:"list",id:u.listId,"aria-orientation":o,"data-orientation":o,"data-slot":"file-upload-list","data-state":n?"active":"inactive",dir:u.dir,...r,ref:t,className:w("data-[state=inactive]:fade-out-0 data-[state=active]:fade-in-0 data-[state=inactive]:slide-out-to-top-2 data-[state=active]:slide-in-from-top-2 flex flex-col gap-2 data-[state=active]:animate-in data-[state=inactive]:animate-out",o==="horizontal"&&"flex-row overflow-x-auto p-1.5",i)})});se.displayName=me;const ct=d.createContext(null);function ge(a){const t=d.useContext(ct);if(!t)throw new Error(ye[a]);return t}const ae=d.forwardRef((a,t)=>{const{value:i,asChild:o,className:h,...s}=a,r=d.useId(),u=`${r}-status`,n=`${r}-name`,c=`${r}-size`,f=`${r}-message`,l=Z(O),p=G(m=>m.files.get(i)),g=G(m=>m.files.size),R=G(m=>Array.from(m.files.keys()).indexOf(i)+1),U=d.useMemo(()=>({id:r,fileState:p,nameId:n,sizeId:c,statusId:u,messageId:f}),[r,p,u,n,c,f]);if(!p)return null;const X=p.error?`Error: ${p.error}`:p.status==="uploading"?`Uploading: ${p.progress}% complete`:p.status==="success"?"Upload complete":"Ready to upload",L=o?P:"div";return e.jsx(ct.Provider,{value:U,children:e.jsxs(L,{role:"listitem",id:r,"aria-setsize":g,"aria-posinset":R,"aria-describedby":`${n} ${c} ${u} ${p.error?f:""}`,"aria-labelledby":n,"data-slot":"file-upload-item",dir:l.dir,...s,ref:t,className:w("relative flex items-center gap-2.5 rounded-md border p-3",h),children:[a.children,e.jsx("span",{id:u,className:"sr-only",children:X})]})})});ae.displayName=O;function It(a){if(a===0)return"0 B";const t=["B","KB","MB","GB","TB"],i=Math.floor(Math.log(a)/Math.log(1024));return`${(a/1024**i).toFixed(i?1:0)} ${t[i]}`}function Pt(a){var o;const t=a.type,i=((o=a.name.split(".").pop())==null?void 0:o.toLowerCase())??"";return t.startsWith("video/")?e.jsx(Et,{}):t.startsWith("audio/")?e.jsx(bt,{}):t.startsWith("text/")||["txt","md","rtf","pdf"].includes(i)?e.jsx(St,{}):["html","css","js","jsx","ts","tsx","json","xml","php","py","rb","java","c","cpp","cs"].includes(i)?e.jsx(kt,{}):["zip","rar","7z","tar","gz","bz2"].includes(i)?e.jsx(yt,{}):["exe","msi","app","apk","deb","rpm"].includes(i)||t.startsWith("application/")?e.jsx(Ft,{}):e.jsx(Ct,{})}const re=d.forwardRef((a,t)=>{var f;const{render:i,asChild:o,children:h,className:s,...r}=a,u=ge(pe),n=d.useCallback(l=>{var p;return i?i(l):(p=u.fileState)!=null&&p.file.type.startsWith("image/")?e.jsx("img",{src:URL.createObjectURL(l),alt:l.name,className:"size-full object-cover",onLoad:g=>{g.target instanceof HTMLImageElement&&URL.revokeObjectURL(g.target.src)}}):Pt(l)},[i,(f=u.fileState)==null?void 0:f.file.type]);if(!u.fileState)return null;const c=o?P:"div";return e.jsxs(c,{"aria-labelledby":u.nameId,"data-slot":"file-upload-preview",...r,ref:t,className:w("relative flex size-10 shrink-0 items-center justify-center overflow-hidden rounded border bg-accent/50 [&>svg]:size-10",s),children:[n(u.fileState.file),h]})});re.displayName=pe;const ie=d.forwardRef((a,t)=>{const{asChild:i,size:o="default",children:h,className:s,...r}=a,u=Z(Y),n=ge(Y);if(!n.fileState)return null;const c=i?P:"div";return e.jsx(c,{"data-slot":"file-upload-metadata",dir:u.dir,...r,ref:t,className:w("flex min-w-0 flex-1 flex-col",s),children:h??e.jsxs(e.Fragment,{children:[e.jsx("span",{id:n.nameId,className:w("truncate font-medium text-sm",o==="sm"&&"font-normal text-[13px] leading-snug"),children:n.fileState.file.name}),e.jsx("span",{id:n.sizeId,className:w("truncate text-muted-foreground text-xs",o==="sm"&&"text-[11px]"),children:It(n.fileState.file.size)}),n.fileState.error&&e.jsx("span",{id:n.messageId,className:"text-destructive text-xs",children:n.fileState.error})]})})});ie.displayName=Y;const Mt=d.forwardRef((a,t)=>{const{variant:i="linear",size:o=40,asChild:h,forceMount:s,className:r,...u}=a,n=ge(he);if(!n.fileState||!(s||n.fileState.progress!==100))return null;const f=h?P:"div";switch(i){case"circular":{const l=2*Math.PI*((o-4)/2),p=l-n.fileState.progress/100*l;return e.jsx(f,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":n.fileState.progress,"aria-valuetext":`${n.fileState.progress}%`,"aria-labelledby":n.nameId,"data-slot":"file-upload-progress",...u,ref:t,className:w("-translate-x-1/2 -translate-y-1/2 absolute top-1/2 left-1/2",r),children:e.jsxs("svg",{className:"rotate-[-90deg] transform",width:o,height:o,viewBox:`0 0 ${o} ${o}`,fill:"none",stroke:"currentColor",children:[e.jsx("circle",{className:"text-primary/20",strokeWidth:"2",cx:o/2,cy:o/2,r:(o-4)/2}),e.jsx("circle",{className:"text-primary transition-[stroke-dashoffset] duration-300 ease-linear",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:l,strokeDashoffset:p,cx:o/2,cy:o/2,r:(o-4)/2})]})})}case"fill":{const l=n.fileState.progress,p=100-l;return e.jsx(f,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":l,"aria-valuetext":`${l}%`,"aria-labelledby":n.nameId,"data-slot":"file-upload-progress",...u,ref:t,className:w("absolute inset-0 bg-primary/50 transition-[clip-path] duration-300 ease-linear",r),style:{clipPath:`inset(${p}% 0% 0% 0%)`}})}default:return e.jsx(f,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":n.fileState.progress,"aria-valuetext":`${n.fileState.progress}%`,"aria-labelledby":n.nameId,"data-slot":"file-upload-progress",...u,ref:t,className:w("relative h-1.5 w-full overflow-hidden rounded-full bg-primary/20",r),children:e.jsx("div",{className:"h-full w-full flex-1 bg-primary transition-transform duration-300 ease-linear",style:{transform:`translateX(-${100-n.fileState.progress}%)`}})})}});Mt.displayName=he;const ne=d.forwardRef((a,t)=>{var c;const{asChild:i,...o}=a,h=ve(ee),s=ge(ee),r=le(o),u=d.useCallback(f=>{var l,p;(p=(l=r.current)==null?void 0:l.onClick)==null||p.call(l,f),!(!s.fileState||f.defaultPrevented)&&h.dispatch({variant:"REMOVE_FILE",file:s.fileState.file})},[h,s.fileState,(c=r.current)==null?void 0:c.onClick]);if(!s.fileState)return null;const n=i?P:"button";return e.jsx(n,{type:"button","aria-controls":s.id,"aria-describedby":s.nameId,"data-slot":"file-upload-item-delete",...o,ref:t,onClick:u})});ne.displayName=ee;const zt=d.forwardRef((a,t)=>{const{asChild:i,forceMount:o,disabled:h,...s}=a,r=Z(te),u=ve(te),n=le(s),c=h||r.disabled,f=d.useCallback(g=>{var R,U;(U=(R=n.current)==null?void 0:R.onClick)==null||U.call(R,g),!g.defaultPrevented&&u.dispatch({variant:"CLEAR"})},[u,n]);if(!(o||G(g=>g.files.size>0)))return null;const p=i?P:"button";return e.jsx(p,{type:"button","aria-controls":r.listId,"data-slot":"file-upload-clear","data-disabled":c?"":void 0,...s,ref:t,disabled:c,onClick:f})});zt.displayName=te;const xe=ot,Tt=K.object({files:K.array(K.custom()).min(1,"Please select at least one file").max(1,"Please select only 1 file").refine(a=>a.every(t=>t.size<=5*1024*1024),{message:"File size must be less than 5MB",path:["files"]})}),Ut=()=>{const[a,t]=d.useState([]),i=et({resolver:qe(Tt),defaultValues:{files:[]}}),o=tt({...gt(),onMutate:()=>{de("Packing",{description:"Packing the provided file into .fhm format..."})},onSuccess:s=>{var c;de("Successful!",{description:"Packed FHM file successfully!"});const r=((c=i.getValues("files")[0])==null?void 0:c.name)??"packed.fhm",u=r.substring(0,r.lastIndexOf(".")),n=new File([s],`${u}.fhm`,{type:s.type});t([n])},onSettled:async(s,r)=>{if(r){const u=await Ge(r);i.setError("files",{message:(u==null?void 0:u.title)??r.message})}}}),h=We.useCallback(async s=>{o.mutate({body:{file:s.files[0]}})},[]);return e.jsxs(e.Fragment,{children:[e.jsx(Ke,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(h),className:"w-full",children:[e.jsx(Ze,{control:i.control,name:"files",render:({field:s,fieldState:r})=>e.jsxs(Xe,{children:[e.jsx(Je,{children:"Attachments"}),e.jsx(Qe,{children:e.jsxs(xe,{value:s.value,onValueChange:s.onChange,accept:".zip,.rar,.tar,.tar.gz",maxFiles:1,maxSize:100*1024*1024,invalid:r.invalid,onFileReject:(u,n)=>{i.setError("files",{message:n})},children:[e.jsxs(ke,{children:[e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{className:"flex items-center justify-center rounded-full border p-2.5",children:e.jsx(it,{className:"size-6 text-muted-foreground"})}),e.jsx("p",{className:"font-medium text-sm",children:"Drag & drop files here"}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"Or click to browse (max 1 files, up to 100MB each)"})]}),e.jsx(Fe,{asChild:!0,children:e.jsx(V,{variant:"outline",size:"sm",className:"mt-2 w-fit",children:"Browse files"})})]}),e.jsx(se,{children:s.value.map((u,n)=>e.jsxs(ae,{value:u,children:[e.jsx(re,{}),e.jsx(ie,{}),a[0]&&e.jsx(V,{variant:"ghost",size:"icon",className:"size-7",title:"Download converted file",type:"button",onClick:()=>{const c=a[0],f=URL.createObjectURL(c),l=document.createElement("a");l.href=f,l.download=c.name,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(f)},children:e.jsx(rt,{})}),e.jsx(ne,{asChild:!0,children:e.jsx(V,{variant:"ghost",size:"icon",className:"size-7",title:"Remove file",children:e.jsx(ue,{})})})]},n))})]})}),e.jsx(Ye,{})]})}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsxs(st,{disabled:o.isPending,className:"w-1/12 min-w-fit",icon:xt,iconPlacement:"right",effect:"expandIcon",children:[o.isPending&&e.jsx(at,{className:"animate-spin mr-2"}),"Pack"]})})]})}),e.jsx(xe,{children:e.jsx(se,{children:e.jsxs(ae,{value:a[0],children:[e.jsx(re,{}),e.jsx(ie,{}),e.jsx(ne,{asChild:!0,children:e.jsx(V,{variant:"ghost",size:"icon",className:"size-7",children:e.jsx(ue,{})})})]})})})]})},Lt=K.object({files:K.array(K.custom()).min(1,"Please select at least one file").max(1,"Please select only 1 file").refine(a=>a.every(t=>t.size<=5*1024*1024),{message:"File size must be less than 5MB",path:["files"]})}),Dt=()=>{const[a,t]=d.useState([]),i=et({resolver:qe(Lt),defaultValues:{files:[]}}),o=tt({...jt(),onMutate:()=>{de("Unpacking",{description:"Unpacking the provided file into .tar format..."})},onSuccess:s=>{var c;de("Successful!",{description:"Packed FHM file successfully!"});const r=((c=i.getValues("files")[0])==null?void 0:c.name)??"unpacked.tar",u=r.substring(0,r.lastIndexOf(".")),n=new File([s],`${u}.tar`,{type:s.type});t([n])},onSettled:async(s,r)=>{if(r){const u=await Ge(r);i.setError("files",{message:(u==null?void 0:u.title)??r.message})}}}),h=We.useCallback(async s=>{o.mutate({body:{file:s.files[0]}})},[]);return e.jsxs(e.Fragment,{children:[e.jsx(Ke,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(h),className:"w-full",children:[e.jsx(Ze,{control:i.control,name:"files",render:({field:s,fieldState:r})=>e.jsxs(Xe,{children:[e.jsx(Je,{children:"Attachments"}),e.jsx(Qe,{children:e.jsxs(xe,{value:s.value,onValueChange:s.onChange,accept:".fhm",maxFiles:1,maxSize:100*1024*1024,invalid:r.invalid,onFileReject:(u,n)=>{i.setError("files",{message:n})},children:[e.jsxs(ke,{children:[e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{className:"flex items-center justify-center rounded-full border p-2.5",children:e.jsx(it,{className:"size-6 text-muted-foreground"})}),e.jsx("p",{className:"font-medium text-sm",children:"Drag & drop files here"}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"Or click to browse (max 1 files, up to 100MB each)"})]}),e.jsx(Fe,{asChild:!0,children:e.jsx(V,{variant:"outline",size:"sm",className:"mt-2 w-fit",children:"Browse files"})})]}),e.jsx(se,{children:s.value.map((u,n)=>e.jsxs(ae,{value:u,children:[e.jsx(re,{}),e.jsx(ie,{}),a[0]&&e.jsx(V,{variant:"ghost",size:"icon",className:"size-7",title:"Download converted file",type:"button",onClick:()=>{const c=a[0],f=URL.createObjectURL(c),l=document.createElement("a");l.href=f,l.download=c.name,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(f)},children:e.jsx(rt,{})}),e.jsx(ne,{asChild:!0,children:e.jsx(V,{variant:"ghost",size:"icon",className:"size-7",title:"Remove file",children:e.jsx(ue,{})})})]},n))})]})}),e.jsx(Ye,{})]})}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsxs(st,{disabled:o.isPending,className:"w-1/12 min-w-fit",icon:vt,iconPlacement:"right",effect:"expandIcon",children:[o.isPending&&e.jsx(at,{className:"animate-spin mr-2"}),"Unpack"]})})]})}),e.jsx(xe,{children:e.jsx(se,{children:e.jsxs(ae,{value:a[0],children:[e.jsx(re,{}),e.jsx(ie,{}),e.jsx(ne,{asChild:!0,children:e.jsx(V,{variant:"ghost",size:"icon",className:"size-7",children:e.jsx(ue,{})})})]})})})]})},Xt=function(){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between space-y-2",children:e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Fhm"})}),e.jsx("label",{className:"text-sm text-muted-foreground",children:"Pack / Unpack .fhm file"}),e.jsxs(pt,{defaultValue:"pack",children:[e.jsxs(ht,{children:[e.jsx(Ae,{value:"pack",children:"Pack"}),e.jsx(Ae,{value:"unpack",children:"Unpack"})]}),e.jsx(_e,{className:"w-full",value:"pack",children:e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs($e,{children:[e.jsxs(Oe,{children:[e.jsx(Ve,{children:"Pack Assets"}),e.jsx(Be,{children:"Pack asset files to .fhm container format."})]}),e.jsx(He,{children:e.jsx(Ut,{})})]})})}),e.jsx(_e,{className:"w-full",value:"unpack",children:e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs($e,{children:[e.jsxs(Oe,{children:[e.jsx(Ve,{children:"Unpack Assets"}),e.jsx(Be,{children:"Unpack asset files from .fhm container format."})]}),e.jsx(He,{children:e.jsx(Dt,{})})]})})})]})]})};export{Xt as component};
