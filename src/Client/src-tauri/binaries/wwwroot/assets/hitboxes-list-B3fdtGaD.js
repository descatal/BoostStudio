import{j as e,b as x,k as p,a2 as u,aG as j,aH as f,S as g}from"./index-_vJHe0oM.js";import{C as b,b as C,c as P,d as H,a as S}from"./card-5a8OwMZI.js";import{c as v,p as m,h as y,f as N,g as T,P as z,u as E,i as A,j as w}from"./react-icons.esm-CMH9-wE8.js";import{U,h as I}from"./columns-BlpQJy-L.js";import{E as d}from"./enhanced-button-CUT0MAbl.js";import{u as R}from"./useQuery-BdyAwn5H.js";import{C as k,D as B}from"./react-query.gen-KD5ZsEyq.js";import{I as D}from"./icons-stbk7nY0.js";import{M,S as L}from"./index-MRitm8At.js";import{u as O}from"./useMutation-0UaTLUn9.js";import{C as G,a as q,B as h,b as F,c as K,d as V,h as W,e as _,f as J}from"./index-CH22QDEB.js";import{L as Q}from"./label-5eQ_BX-X.js";import{U as X}from"./units-selector-CW0f3RqB.js";const Y={...y,hashes:m(T),unitIds:m(N)},Z={hashes:"hash",unitIds:"unitId"},$=v(Y,{urlKeys:Z});function ee({}){return e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(U,{triggerButton:e.jsx(d,{variant:"default",effect:"expandIcon",icon:z,iconPlacement:"right",children:"Create"})})})}const se=({unitId:s})=>{const{page:a,perPage:l,hashes:r,unitIds:c}=$(location.search),i=R({...k({query:{Page:a,PerPage:l,Hashes:(r==null?void 0:r.map(n=>parseInt(n,16)))??void 0,UnitIds:s?[s]:c??void 0}})}),t=i==null?void 0:i.data,{table:o}=E({data:(t==null?void 0:t.items)??[],columns:I,initialState:{columnPinning:{right:["actions"],left:["hash"]},pagination:{pageIndex:1,pageSize:5}},pageCount:(t==null?void 0:t.totalPages)??0,shallow:!1});return e.jsx(A,{table:o,children:e.jsx(w,{table:o,children:e.jsx(ee,{})})})},ae=({triggerButton:s,unitIds:a,...l})=>{const[r,c]=x.useState(!0),[i,t]=x.useState([]),o=O({...B(),onSuccess:n=>{p("Success",{description:"Export completed!"})}});return e.jsxs(G,{...l,children:[e.jsx(q,{asChild:!0,children:s??e.jsx(d,{effect:"gooeyRight",icon:h,iconPlacement:"right",children:"Export"})}),e.jsxs(F,{children:[e.jsxs(K,{children:[e.jsx(V,{children:"Export Ammo Info"}),e.jsx(W,{children:"Export hitbox info to working directory."})]}),e.jsx(_,{children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{children:"Units"}),e.jsx(X,{disabled:!!a,className:"w-full",defaultValues:a,value:i,onChange:t,placeholder:a?void 0:"Select units..."})]}),e.jsxs("div",{className:"flex items-center space-x-4 rounded-md border p-4",children:[e.jsx(M,{size:40}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Hot Reload"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Patch the compiled binary to a running RPCS3's memory."})]}),e.jsxs(u,{children:[e.jsx(j,{children:e.jsx(L,{disabled:!!a&&a.length>1,checked:r,onCheckedChange:c})}),!!a&&a.length>1&&e.jsx(f,{children:e.jsx("p",{children:"Only available for single unit"})})]})]}),e.jsx(g,{})]})}),e.jsx(J,{children:e.jsxs(d,{className:"w-full",effect:"expandIcon",variant:"default",icon:h,iconPlacement:"right",disabled:o.isPending,onClick:async()=>{o.mutate({body:{unitIds:i.map(n=>Number(n.value)),replaceWorking:!0,hotReload:r}})},children:[o.isPending&&e.jsx(D.spinner,{className:"size-4 mr-2 animate-spin","aria-hidden":"true"}),"Export"]})})]})]})},je=({unitId:s})=>e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs(b,{className:"col-span-full",children:[e.jsxs(C,{className:"flex flex-row justify-between",children:[e.jsxs("div",{children:[e.jsx(P,{children:"Hitboxes"}),e.jsx(H,{children:s?"Hitboxes associated with this unit":"All hitboxes"})]}),e.jsx(ae,{unitIds:s?[s]:void 0})]}),e.jsx(S,{children:e.jsx("div",{className:"space-y-4",children:e.jsx(se,{unitId:s})})})]})});export{je as H};
