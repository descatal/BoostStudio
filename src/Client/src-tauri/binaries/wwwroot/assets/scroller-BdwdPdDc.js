import{j as t,b,r,i as re,c as X,av as Y}from"./index-_vJHe0oM.js";import{S as oe,b as ae,c as ne,d as ie,e as ce,f as ue,h as de,i as me,C as fe,j as pe}from"./hash-input-BmZZ7wAd.js";import{b as he,C as ve,c as ge}from"./constants-Ch2OuaxH.js";import{L as F}from"./label-5eQ_BX-X.js";import{T as Se,a as be,b as Q,c as q}from"./tabs-dpXjghAS.js";import{U as Te}from"./units-selector-CW0f3RqB.js";import{u as Ae}from"./useQuery-BdyAwn5H.js";import{s as we}from"./react-query.gen-KD5ZsEyq.js";import{u as ye}from"./composition-D2Mlinab.js";const $=({type:f="combined",selectedUnitAssetFileType:h,setSelectedUnitAssetFileType:o,...g})=>{const i=f==="unit"?he:f==="common"?ve:ge;return t.jsxs(oe,{value:h,onValueChange:s=>o(s),...g,children:[t.jsx(ae,{className:"capitalize",children:t.jsx(ne,{placeholder:"Select File Type"})}),t.jsx(ie,{className:"max-h-[10rem] overflow-y-auto",children:t.jsx(ce,{children:Object.values(i).map(s=>t.jsx(ue,{value:s,className:"capitalize",children:s},s))})})]})},ke=({unitIds:f,setResultAssetFiles:h})=>{var v;const[o,g]=b.useState("unit"),[i,s]=b.useState([]),[a,n]=b.useState(),[c,S]=b.useState(),[l,T]=b.useState([]),u=((v=Ae({...we({query:{UnitIds:i.map(d=>Number(d.value)),AssetFileTypes:l,ListAll:!0}}),enabled:l.length>0}).data)==null?void 0:v.items)??[];return b.useEffect(()=>{u.length<=0?h(void 0):h(u)},[u]),b.useEffect(()=>{T((o==="unit"?a&&[a]:c&&[c])??[])},[o,a,c]),t.jsxs(Se,{defaultValue:"unit",className:"space-y-4",value:o,onValueChange:d=>{g(d)},children:[t.jsxs(be,{children:[t.jsx(Q,{value:"unit",children:"Unit"}),t.jsx(Q,{value:"common",children:"Common"})]}),t.jsxs(q,{value:"unit",className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{children:"Search by unit asset files"}),t.jsx(Te,{multiple:!0,disabled:!!f,className:"w-full",value:i,onChange:s,defaultValues:f,placeholder:f?void 0:"Select units..."})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{children:"File type"}),t.jsx($,{type:"unit",selectedUnitAssetFileType:a,setSelectedUnitAssetFileType:d=>n(d)})]})]}),t.jsx(q,{value:"common",className:"space-y-4",children:t.jsxs("div",{className:"space-y-2",children:[t.jsx(F,{children:"Search by common asset files"}),t.jsx($,{type:"common",selectedUnitAssetFileType:c,setSelectedUnitAssetFileType:d=>S(d)})]})})]})},N="data-top-scroll",z="data-bottom-scroll",O="data-left-scroll",R="data-right-scroll",J="data-top-bottom-scroll",K="data-left-right-scroll",_e=Y("",{variants:{orientation:{vertical:["overflow-y-auto","data-[top-scroll=true]:[mask-image:linear-gradient(0deg,#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]","data-[bottom-scroll=true]:[mask-image:linear-gradient(180deg,#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]","data-[top-bottom-scroll=true]:[mask-image:linear-gradient(#000,#000,transparent_0,#000_var(--scroll-shadow-size),#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]"],horizontal:["overflow-x-auto","data-[left-scroll=true]:[mask-image:linear-gradient(270deg,#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]","data-[right-scroll=true]:[mask-image:linear-gradient(90deg,#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]","data-[left-right-scroll=true]:[mask-image:linear-gradient(to_right,#000,#000,transparent_0,#000_var(--scroll-shadow-size),#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]"]},hideScrollbar:{true:"[-ms-overflow-style:none] [scrollbar-width:none] [&::-webkit-scrollbar]:hidden",false:""}},defaultVariants:{orientation:"vertical",hideScrollbar:!1}}),xe=r.forwardRef((f,h)=>{const{orientation:o="vertical",hideScrollbar:g,className:i,size:s=40,offset:a=0,scrollStep:n=40,style:c,asChild:S,withNavigation:l=!1,scrollTriggerMode:T="press",..._}=f,u=r.useRef(null),v=ye(h,u),[d,U]=r.useState({up:!1,down:!1,left:!1,right:!1}),y=r.useCallback(e=>{const m=u.current;if(!m)return;({up:()=>m.scrollTop-=n,down:()=>m.scrollTop+=n,left:()=>m.scrollLeft-=n,right:()=>m.scrollLeft+=n})[e]()},[n]),M=r.useMemo(()=>({up:()=>y("up"),down:()=>y("down"),left:()=>y("left"),right:()=>y("right")}),[y]);r.useLayoutEffect(()=>{const e=u.current;if(!e)return;function m(){if(!e)return;if(o==="vertical"){const p=e.scrollTop,A=e.clientHeight,w=e.scrollHeight;l&&U(L=>{const W=p>a,G=p+A<w;return L.up!==W||L.down!==G?{...L,up:W,down:G}:L});const I=p>a,P=p+A+a<w,B=w>A;I&&P&&B?(e.setAttribute(J,"true"),e.removeAttribute(N),e.removeAttribute(z)):(e.removeAttribute(J),I?e.setAttribute(N,"true"):e.removeAttribute(N),P&&B?e.setAttribute(z,"true"):e.removeAttribute(z))}const x=e.scrollLeft,j=e.clientWidth,C=e.scrollWidth;l&&U(p=>{const A=x>a,w=x+j<C;return p.left!==A||p.right!==w?{...p,left:A,right:w}:p});const E=x>a,H=x+j+a<C,D=C>j;E&&H&&D?(e.setAttribute(K,"true"),e.removeAttribute(O),e.removeAttribute(R)):(e.removeAttribute(K),E?e.setAttribute(O,"true"):e.removeAttribute(O),H&&D?e.setAttribute(R,"true"):e.removeAttribute(R))}return m(),e.addEventListener("scroll",m),window.addEventListener("resize",m),()=>{e.removeEventListener("scroll",m),window.removeEventListener("resize",m)}},[o,a,l]);const ee=r.useMemo(()=>({"--scroll-shadow-size":`${s}px`,...c}),[s,c]),V=r.useMemo(()=>l?o==="vertical"?["up","down"]:["left","right"]:[],[o,l]),te=S?re:"div",k=t.jsx(te,{"data-slot":"scroller",..._,ref:v,style:ee,className:X(_e({orientation:o,hideScrollbar:g,className:i}))}),se=r.useMemo(()=>l?V.filter(e=>d[e]).map(e=>t.jsx(Z,{"data-slot":"scroll-button",direction:e,onClick:M[e],triggerMode:T},e)):null,[V,d,M,T,l]);return l?t.jsxs("div",{className:"relative w-full",children:[se,k]}):k});xe.displayName="Scroller";const Le=Y("absolute z-10 transition-opacity [&>svg]:size-4 [&>svg]:opacity-80 hover:[&>svg]:opacity-100",{variants:{direction:{up:"-translate-x-1/2 top-2 left-1/2",down:"-translate-x-1/2 bottom-2 left-1/2",left:"-translate-y-1/2 top-1/2 left-2",right:"-translate-y-1/2 top-1/2 right-2"}},defaultVariants:{direction:"up"}}),je={up:pe,down:fe,left:me,right:de},Z=r.forwardRef((f,h)=>{const{direction:o,className:g,triggerMode:i="press",onClick:s,...a}=f,[n,c]=r.useState(null),S=r.useCallback(u=>{if(n===null){if(i==="press"){const v=window.setInterval(s??(()=>{}),50);c(v)}else if(i==="hover"){const v=window.setInterval(()=>{u&&(s==null||s(u))},50);c(v)}}},[n,s,i]),l=r.useCallback(()=>{n!==null&&(window.clearInterval(n),c(null))},[n]),T=r.useMemo(()=>({press:{onPointerDown:S,onPointerUp:l,onPointerLeave:l,onClick:()=>{}},hover:{onPointerEnter:S,onPointerLeave:l,onClick:()=>{}},click:{onClick:s}})[i]??{},[i,S,l,s]);r.useEffect(()=>()=>l(),[l]);const _=je[o];return t.jsx("button",{type:"button",...a,...T,ref:h,className:X(Le({direction:o,className:g})),children:t.jsx(_,{})})});Z.displayName="ScrollButton";export{ke as A,xe as S};
