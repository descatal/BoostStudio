import{h as Ze,j as e,S as ae,a0 as Ye,b as x,f as ne,k as S,r as E,a1 as te,a4 as Je,a5 as We,a6 as Ie,a7 as Xe,a8 as es,a9 as Fe,aa as ss,ab as as,ac as we,ad as ns,ae as ts,af as is,c as D,a as rs,ag as os,ah as ls,ai as cs,aj as ds,ak as xe,al as us}from"./index-_vJHe0oM.js";import{C as H,b as W,a as T,c as hs,d as xs}from"./card-5a8OwMZI.js";import{a as I}from"./constants-BO8B297w.js";import{C as ze,a as He,b as Te,c as Ve,d as Ee,e as ms,f as Me,g as ps,B as me,h as js,i as fs}from"./index-CH22QDEB.js";import{b as gs,c as vs}from"./index-B04qnfvD.js";import{u as N}from"./useMutation-0UaTLUn9.js";import{e as bs,f as M,h as Cs,i as ys,j as As,k as Ps,l as Ss,g as Ns,m as Is}from"./react-query.gen-KD5ZsEyq.js";import{E as y}from"./enhanced-button-CUT0MAbl.js";import{I as k}from"./icons-stbk7nY0.js";import{z as R,C as pe,I as P,a as Fs,b as ws,P as zs,c as Hs,d as Ts,e as X,p as G,f as Vs,g as Es,h as Ms,D as Rs,u as _s,i as Ds,j as ks}from"./react-icons.esm-CMH9-wE8.js";import{F as Os,a as f,b as g,c as v,d as b,f as w,t as je}from"./zod-KirBnuy0.js";import{u as Bs}from"./index-Cljsltwk.js";import{A as Ls,S as fe}from"./scroller-BdwdPdDc.js";import{L as V}from"./label-5eQ_BX-X.js";import{P as $s,a as Us,H as ie,C as Ks,S as ge,b as ve,c as be,d as Ce,e as ye,f as Ae,g as Qs}from"./hash-input-BmZZ7wAd.js";import{B as z}from"./badge-BRKXVVmH.js";import{u as ee}from"./useQuery-BdyAwn5H.js";import"./command-Cnu_HUkU.js";import"./x-C61GwT2n.js";import"./loader-2-BZ5HxNZN.js";import"./check-CUgUruzn.js";import"./index-BdQq_4o_.js";import"./index-CngXnCLZ.js";import"./constants-Ch2OuaxH.js";import"./tabs-dpXjghAS.js";import"./units-selector-CW0f3RqB.js";import"./composition-D2Mlinab.js";import"./suspense-CFdXitkI.js";const qs=Ze("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),re=({triggerButton:s,cancelButton:a,confirmButton:n,title:r,body:t="",icon:o="danger",...c})=>e.jsxs(ze,{...c,children:[e.jsx(He,{asChild:!0,children:s}),e.jsxs(Te,{children:[e.jsx(Ve,{className:"flex",children:e.jsxs(Ee,{className:"flex items-center gap-2",children:[o==="danger"&&e.jsx(gs,{className:"size-6","aria-hidden":"true"}),o==="info"&&e.jsx(qs,{className:"size-6","aria-hidden":"true"}),r]})}),e.jsxs(ms,{children:[e.jsx("div",{className:"grid gap-4",children:t&&e.jsx("div",{className:"my-2",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:t})})}),e.jsx(ae,{})]}),e.jsxs(Me,{children:[e.jsx(ps,{asChild:!0,children:a}),n]})]})]});function Pe(s){return Ye({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12 6V4H20V20H12V18H8V16H4V8H8V6H12ZM14 6H18V18H14V6ZM12 8H10V16H12V8ZM8 10V14H6V10H8Z",fill:"currentColor"},child:[]}]})(s)}const Gs=({patchId:s})=>{const[a,n]=x.useState(!1),r=ne(),t=N({...bs(),onSuccess:async()=>{S("Success!",{description:"Size for all files in this patch file has been updated!"}),n(!1),await r.invalidateQueries({predicate:o=>o.queryKey[0]._id===M()[0]._id})}});return e.jsx(re,{open:a,onOpenChange:n,icon:"info",title:"Are you sure?",body:`This will update all patch entries' file sizes for ${I[s??"All"]}.`,triggerButton:e.jsx(y,{effect:"gooeyLeft",icon:Pe,iconPlacement:"right",children:"Resize"}),confirmButton:e.jsxs(y,{className:"w-full",effect:"expandIcon",icon:Pe,iconPlacement:"right",type:"button",disabled:t.isPending,onClick:()=>{t.mutate({body:{versions:s?[s]:void 0}})},children:[t.isPending&&e.jsx(k.spinner,{className:"size-4 mr-2 animate-spin","aria-hidden":"true"}),"Resize"]})})},Zs=({patchId:s})=>{const[a,n]=x.useState(!1),r=N({...Cs(),onSuccess:()=>{S("Success!",{description:"Patch info successfully exported."}),n(!1)}});return e.jsx(re,{open:a,onOpenChange:n,icon:"info",title:"Are you sure?",body:`This will replace the tbl information at ${s&&I[s]}/PATCH.TBL`,triggerButton:e.jsx(y,{effect:"gooeyRight",icon:me,iconPlacement:"right",children:"Export"}),confirmButton:e.jsxs(y,{className:"w-full",effect:"expandIcon",icon:me,iconPlacement:"right",type:"button",disabled:r.isPending,onClick:()=>{s&&r.mutate({body:{versions:[s],replaceStaging:!0}})},children:[r.isPending&&e.jsx(k.spinner,{className:"size-4 mr-2 animate-spin","aria-hidden":"true"}),"Confirm"]})})};function Ys({setAssetFile:s,children:a}){const[n,r]=E.useState(!1),[t,o]=E.useState();return e.jsxs($s,{open:n,onOpenChange:r,children:[e.jsx(Us,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ls,{setResultAssetFiles:c=>{c&&c.length>0&&o(c[0])}}),e.jsx(ae,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{children:"File Hash"}),e.jsx(ie,{readonly:!0,className:`${t?"border-green-800":"border-red-800"}`,initialMode:"hex",initialValue:t==null?void 0:t.hash,placeholder:"e.g. 1A42E312"})]}),e.jsx(te,{disabled:!t,className:"w-full",onClick:()=>{s(t),r(!1)},children:"Select"})]})}),a]})}var p="Accordion",Js=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[oe,Ws,Xs]=Je(p),[O,Za]=We(p,[Xs,Ie]),le=Ie(),Re=x.forwardRef((s,a)=>{const{type:n,...r}=s,t=r,o=r;return e.jsx(oe.Provider,{scope:s.__scopeAccordion,children:n==="multiple"?e.jsx(na,{...o,ref:a}):e.jsx(aa,{...t,ref:a})})});Re.displayName=p;var[_e,ea]=O(p),[De,sa]=O(p,{collapsible:!1}),aa=x.forwardRef((s,a)=>{const{value:n,defaultValue:r,onValueChange:t=()=>{},collapsible:o=!1,...c}=s,[d,i]=we({prop:n,defaultProp:r??"",onChange:t,caller:p});return e.jsx(_e,{scope:s.__scopeAccordion,value:x.useMemo(()=>d?[d]:[],[d]),onItemOpen:i,onItemClose:x.useCallback(()=>o&&i(""),[o,i]),children:e.jsx(De,{scope:s.__scopeAccordion,collapsible:o,children:e.jsx(ke,{...c,ref:a})})})}),na=x.forwardRef((s,a)=>{const{value:n,defaultValue:r,onValueChange:t=()=>{},...o}=s,[c,d]=we({prop:n,defaultProp:r??[],onChange:t,caller:p}),i=x.useCallback(m=>d((h=[])=>[...h,m]),[d]),l=x.useCallback(m=>d((h=[])=>h.filter(C=>C!==m)),[d]);return e.jsx(_e,{scope:s.__scopeAccordion,value:c,onItemOpen:i,onItemClose:l,children:e.jsx(De,{scope:s.__scopeAccordion,collapsible:!0,children:e.jsx(ke,{...o,ref:a})})})}),[ta,B]=O(p),ke=x.forwardRef((s,a)=>{const{__scopeAccordion:n,disabled:r,dir:t,orientation:o="vertical",...c}=s,d=x.useRef(null),i=ns(d,a),l=Ws(n),h=ts(t)==="ltr",C=is(s.onKeyDown,u=>{var ue;if(!Js.includes(u.key))return;const A=u.target,L=l().filter(q=>{var he;return!((he=q.ref.current)!=null&&he.disabled)}),F=L.findIndex(q=>q.ref.current===A),de=L.length;if(F===-1)return;u.preventDefault();let j=F;const $=0,U=de-1,K=()=>{j=F+1,j>U&&(j=$)},Q=()=>{j=F-1,j<$&&(j=U)};switch(u.key){case"Home":j=$;break;case"End":j=U;break;case"ArrowRight":o==="horizontal"&&(h?K():Q());break;case"ArrowDown":o==="vertical"&&K();break;case"ArrowLeft":o==="horizontal"&&(h?Q():K());break;case"ArrowUp":o==="vertical"&&Q();break}const Ge=j%de;(ue=L[Ge].ref.current)==null||ue.focus()});return e.jsx(ta,{scope:n,disabled:r,direction:t,orientation:o,children:e.jsx(oe.Slot,{scope:n,children:e.jsx(Fe.div,{...c,"data-orientation":o,ref:i,onKeyDown:r?void 0:C})})})}),_="AccordionItem",[ia,ce]=O(_),Oe=x.forwardRef((s,a)=>{const{__scopeAccordion:n,value:r,...t}=s,o=B(_,n),c=ea(_,n),d=le(n),i=Xe(),l=r&&c.value.includes(r)||!1,m=o.disabled||s.disabled;return e.jsx(ia,{scope:n,open:l,disabled:m,triggerId:i,children:e.jsx(es,{"data-orientation":o.orientation,"data-state":Qe(l),...d,...t,ref:a,disabled:m,open:l,onOpenChange:h=>{h?c.onItemOpen(r):c.onItemClose(r)}})})});Oe.displayName=_;var Be="AccordionHeader",Le=x.forwardRef((s,a)=>{const{__scopeAccordion:n,...r}=s,t=B(p,n),o=ce(Be,n);return e.jsx(Fe.h3,{"data-orientation":t.orientation,"data-state":Qe(o.open),"data-disabled":o.disabled?"":void 0,...r,ref:a})});Le.displayName=Be;var se="AccordionTrigger",$e=x.forwardRef((s,a)=>{const{__scopeAccordion:n,...r}=s,t=B(p,n),o=ce(se,n),c=sa(se,n),d=le(n);return e.jsx(oe.ItemSlot,{scope:n,children:e.jsx(ss,{"aria-disabled":o.open&&!c.collapsible||void 0,"data-orientation":t.orientation,id:o.triggerId,...d,...r,ref:a})})});$e.displayName=se;var Ue="AccordionContent",Ke=x.forwardRef((s,a)=>{const{__scopeAccordion:n,...r}=s,t=B(p,n),o=ce(Ue,n),c=le(n);return e.jsx(as,{role:"region","aria-labelledby":o.triggerId,"data-orientation":t.orientation,...c,...r,ref:a,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...s.style}})});Ke.displayName=Ue;function Qe(s){return s?"open":"closed"}var ra=Re,oa=Oe,la=Le,ca=$e,da=Ke;function Se({...s}){return e.jsx(ra,{"data-slot":"accordion",...s})}function Z({className:s,...a}){return e.jsx(oa,{"data-slot":"accordion-item",className:D("border-b last:border-b-0",s),...a})}function Y({className:s,children:a,...n}){return e.jsx(la,{className:"flex",children:e.jsxs(ca,{"data-slot":"accordion-trigger",className:D("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",s),...n,children:[a,e.jsx(Ks,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function J({className:s,children:a,...n}){return e.jsx(da,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...n,children:e.jsx("div",{className:D("pt-0 pb-4",s),children:a})})}function ua({form:s,onSubmit:a,children:n,className:r}){const[t,o]=E.useState(!0),[c,d]=E.useState(!0);return e.jsx(Os,{...s,children:e.jsxs("form",{onSubmit:i=>{t||s.setValue("fileInfo",void 0),c||s.setValue("pathInfo",void 0),s.handleSubmit(a)(i)},className:D("flex max-h-screen flex-col gap-4 overflow-auto px-4",r),children:[e.jsx(f,{control:s.control,name:"tblId",render:({field:i})=>e.jsxs(g,{children:[e.jsx(v,{children:"Table"}),e.jsxs(ge,{onValueChange:i.onChange,defaultValue:i.value,children:[e.jsx(b,{children:e.jsx(ve,{className:"capitalize",children:e.jsx(be,{placeholder:"Select Table Version"})})}),e.jsx(Ce,{children:e.jsx(ye,{children:Object.values(R.Enum).map(l=>e.jsx(Ae,{value:l,className:"capitalize",children:l},l))})})]}),e.jsx(w,{})]})}),e.jsx("div",{className:"flex-row space-y-5",children:e.jsxs(Se,{type:"multiple",className:"w-full",children:[e.jsxs(Z,{value:"path",children:[e.jsx(Y,{children:e.jsx(V,{children:"Path Information"})}),e.jsx(fe,{className:"max-h-56",children:e.jsx(J,{children:e.jsxs(H,{children:[e.jsx(W,{children:e.jsx("div",{className:"flex justify-between",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(pe,{id:"path",checked:c,onCheckedChange:()=>d(!c)}),e.jsx("label",{htmlFor:"path",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Has Path"})]})})}),e.jsx(T,{children:e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx(f,{control:s.control,name:"pathInfo.path",render:({field:i})=>e.jsxs(g,{children:[e.jsx(v,{children:"Path"}),e.jsx(b,{children:e.jsx(P,{disabled:!c,placeholder:`${I[s.getValues().tblId]??""}/`,...i})}),e.jsx(w,{})]})}),e.jsx(f,{control:s.control,name:"pathInfo.order",render:({field:i})=>e.jsxs(g,{children:[e.jsx(v,{children:"Order"}),e.jsx(b,{children:e.jsx(P,{...i,disabled:!c,placeholder:"Leave blank for auto increment",type:"number",min:0,value:i.value??"",onChange:l=>i.onChange(l.target.valueAsNumber)})}),e.jsx(w,{})]})})]})})]})})})]}),e.jsxs(Z,{value:"file",children:[e.jsx(Y,{children:e.jsx(V,{children:"File Information"})}),e.jsx(fe,{className:"max-h-60",children:e.jsx(J,{children:e.jsxs(H,{children:[e.jsx(W,{children:e.jsx("div",{className:"flex justify-between",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(pe,{id:"asset",checked:t,onCheckedChange:i=>{o(i)}}),e.jsx("label",{htmlFor:"asset",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Has Asset File"})]})})}),e.jsx(T,{children:e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx(f,{control:s.control,name:"assetFileHash",render:({field:i})=>e.jsxs(g,{children:[e.jsx(v,{children:"Hash"}),e.jsx(b,{children:e.jsxs("div",{className:"flex flex-row space-x-2",children:[e.jsx(ie,{disabled:!t,initialMode:"hex",initialValue:i.value,placeholder:"Enter Hash",...i,value:i.value??void 0,onHashChanged:l=>{s.setValue("assetFileHash",l??null)}}),e.jsx(Ys,{setAssetFile:l=>{l&&(s.setValue("assetFileHash",null),setTimeout(function(){s.setValue("assetFileHash",l.hash)},5))},children:e.jsx(Qs,{asChild:!0,children:e.jsx(te,{disabled:!t,type:"button",children:"Search..."})})})]})})]})}),e.jsx(f,{control:s.control,name:"fileInfo.version",render:({field:i})=>e.jsxs(g,{children:[e.jsx(v,{children:"Version"}),e.jsxs(ge,{disabled:!t,value:i.value,onValueChange:i.onChange,defaultValue:s.getValues("tblId"),children:[e.jsx(b,{children:e.jsx(ve,{className:"capitalize",children:e.jsx(be,{placeholder:"Select Version"})})}),e.jsx(Ce,{children:e.jsx(ye,{children:Object.values(R.Enum).map(l=>e.jsx(Ae,{value:l,className:"capitalize",children:l},l))})})]}),e.jsx(w,{})]})}),e.jsx(Se,{type:"single",defaultValue:"sizes",collapsible:!0,children:e.jsxs(Z,{value:"sizes",children:[e.jsx(Y,{children:e.jsx(V,{children:"File Sizes"})}),e.jsx(J,{children:e.jsx(H,{children:e.jsx(T,{children:e.jsxs("div",{className:"mt-5 flex-row space-y-3",children:[e.jsx(f,{control:s.control,name:"fileInfo.size1",render:({field:i})=>e.jsxs(g,{children:[e.jsx(v,{children:"Size 1"}),e.jsx(b,{children:e.jsx(P,{...i,placeholder:"Size 1",disabled:!t,type:"number",min:0,value:i.value??"",onChange:l=>i.onChange(l.target.valueAsNumber)})})]})}),e.jsx(f,{control:s.control,name:"fileInfo.size2",render:({field:i})=>e.jsxs(g,{children:[e.jsx(v,{children:"Size 2"}),e.jsx(b,{children:e.jsx(P,{...i,disabled:!t,placeholder:"Size 2",type:"number",min:0,value:i.value??"",onChange:l=>i.onChange(l.target.valueAsNumber)})})]})}),e.jsx(f,{control:s.control,name:"fileInfo.size3",render:({field:i})=>e.jsxs(g,{children:[e.jsx(v,{children:"Size 3"}),e.jsx(b,{children:e.jsx(P,{...i,disabled:!t,placeholder:"Size 3",type:"number",min:0,value:i.value??"",onChange:l=>i.onChange(l.target.valueAsNumber)})})]})}),e.jsx(f,{control:s.control,name:"fileInfo.size4",render:({field:i})=>e.jsxs(g,{children:[e.jsx(v,{children:"Size 4"}),e.jsx(b,{children:e.jsx(P,{...i,disabled:!t,placeholder:"Size 4",type:"number",min:0,value:i.value??"",onChange:l=>i.onChange(l.target.valueAsNumber)})})]})})]})})})})]})})]})})]})})})]})]})}),n]})})}const qe=({triggerButton:s,patchFile:a,...n})=>{const[r,t]=x.useState(!1),o=ne(),c=N({...ys(),onSuccess:async()=>{S("Success!",{description:"Entry created."}),t(!1),await o.invalidateQueries({predicate:u=>u.queryKey[0]._id===M()[0]._id})}}),d=N({...As(),onSuccess:async()=>{S("Success!",{description:"Entry updated."}),t(!1),await o.invalidateQueries({predicate:u=>u.queryKey[0]._id===M()[0]._id})}}),{patchId:i}=rs.useParams(),l=(a==null?void 0:a.tblId)??R.options.find(u=>u===i)??R.Enum.Base,m=I[l],h=Bs({resolver:a?je(Fs):je(ws),defaultValues:a||{tblId:l,fileInfo:{version:l,size1:0,size2:0,size3:0,size4:0},pathInfo:{path:`${m??""}/`,order:void 0},assetFileHash:0}}),C=u=>{if(a){const A=u;d.mutate({body:{...A,id:A.id},path:{id:A.id}})}else{const A=u;c.mutate({body:A})}};return e.jsxs(ze,{...n,open:r,onOpenChange:t,children:[e.jsx(He,{asChild:!0,children:s??e.jsx(e.Fragment,{})}),e.jsxs(Te,{className:"flex flex-col gap-6 sm:max-w-md",children:[e.jsxs(Ve,{className:"text-left",children:[e.jsx(Ee,{children:a?"Update":"Create"}),e.jsxs(js,{children:[a?"Update existing":"Create new"," patch file details and save the changes"]})]}),e.jsx(ae,{}),e.jsx(ua,{form:h,onSubmit:C,children:e.jsx(Me,{children:e.jsxs(y,{className:"mb-2 w-full",effect:"expandIcon",variant:"default",icon:fs,iconPlacement:"right",disabled:a?d.isPending:c.isPending,type:"submit",children:[(a?d.isPending:c.isPending)&&e.jsx(k.spinner,{className:"size-4 mr-2 animate-spin","aria-hidden":"true"}),"Save"]})})})]})]})};function ha({}){return e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(qe,{triggerButton:e.jsx(y,{variant:"default",effect:"expandIcon",icon:zs,iconPlacement:"right",children:"Create"})})})}const xa=Ts({parse(s){return Object.values(X.Enum).includes(s)?s:X.Enum.Unknown},serialize(s){return s}}),ma={...Ms,assetFileHashes:G(Es),fileTypes:G(xa),unitIds:G(Vs)},pa={assetFileHashes:"assetFileHash",fileTypes:"fileType",unitIds:"unitId"},ja=Hs(ma,{urlKeys:pa}),fa=({id:s,triggerButton:a})=>{const[n,r]=x.useState(!1),t=ne(),o=N({...Ps(),onSuccess:async()=>{S("Successful!",{description:"Entry has been deleted."}),r(!1),await t.invalidateQueries({predicate:c=>c.queryKey[0]._id===M()[0]._id})}});return e.jsx(re,{open:n,onOpenChange:r,icon:"danger",title:"Are you sure?",body:"This action cannot be undone.",triggerButton:a??e.jsx(y,{variant:"destructive",children:"Delete"}),confirmButton:e.jsxs(y,{className:"w-full",effect:"expandIcon",icon:vs,iconPlacement:"right",variant:"destructive",type:"button",disabled:o.isPending,onClick:()=>{o.mutate({path:{id:s}})},children:[o.isPending&&e.jsx(k.spinner,{className:"size-4 mr-2 animate-spin","aria-hidden":"true"}),"Delete"]})})},ga=({data:s})=>e.jsx(e.Fragment,{children:e.jsxs(os,{children:[e.jsx(ls,{asChild:!0,children:e.jsx("div",{children:e.jsx(te,{"aria-label":"Open menu",variant:"ghost",className:"flex size-8 p-0 data-[state=open]:bg-muted",children:e.jsx(Rs,{className:"size-4","aria-hidden":"true"})})})}),e.jsxs(cs,{align:"end",className:"w-40",children:[e.jsx(ds,{children:"Actions"}),s.id?e.jsxs(e.Fragment,{children:[e.jsx(qe,{triggerButton:e.jsx(xe,{onSelect:a=>a.preventDefault(),children:"Edit"}),patchFile:s}),e.jsx(fa,{id:s.id,triggerButton:e.jsx(xe,{onSelect:a=>a.preventDefault(),children:"Delete"})})]}):e.jsx(e.Fragment,{})]})]})}),Ne=[{id:"assetFileHash",accessorFn:s=>{var a;return((a=s.assetFile)==null?void 0:a.hash)??s.assetFileHash},header:"File Hash",cell:({row:s})=>{var a;return e.jsx(ie,{className:"border-none",initialValue:((a=s.original.assetFile)==null?void 0:a.hash)??s.original.assetFileHash??void 0,readonly:!0,initialMode:"hex"})},meta:{label:"Hash",variant:"text",placeholder:"Search by Hash (Hex)"},enableColumnFilter:!0},{id:"fileType",accessorFn:s=>{var a;return(a=s.assetFile)==null?void 0:a.fileType},header:"File Type",cell:({row:s})=>{var n;const a=(n=s.original.assetFile)==null?void 0:n.fileType;return!a||a.length===0?e.jsx(z,{className:"w-fit",variant:"outline",children:"-"}):e.jsx("div",{className:"flex flex-col gap-2",children:a&&a.map((r,t)=>e.jsx(z,{className:"justify-center",children:r},t))})},meta:{label:"File Type",variant:"multiSelect",options:Object.keys(X.Enum).map(s=>({label:s,value:s}))},enableColumnFilter:!0},{id:"unitId",accessorFn:s=>{var a;return(a=s.assetFile)==null?void 0:a.units.map(n=>n.unitId)},header:"Units",cell:({row:s})=>{var a,n;return!((a=s.original.assetFile)!=null&&a.units)||((n=s.original.assetFile)==null?void 0:n.units.length)===0?e.jsx(z,{className:"w-fit",variant:"outline",children:"-"}):e.jsx("div",{className:"flex flex-col gap-2",children:s.original.assetFile.units.map((r,t)=>e.jsx(z,{className:"w-fit",variant:"outline",children:r.nameEnglish},`${r.unitId}-${t}`))})},meta:{label:"Unit",variant:"multiSelect"},enableColumnFilter:!0},{id:"filePath",accessorFn:s=>{var a;return(a=s.pathInfo)==null?void 0:a.path},header:"File Path"},{id:"actions",size:40,cell:({row:s})=>{if(s.original.id)return e.jsx(ga,{data:s.original})}}],va=({patchId:s})=>{const{page:a,perPage:n,assetFileHashes:r,fileTypes:t,unitIds:o}=ja(location.search),d=ee({...Ss({query:{Page:a,PerPage:n,Versions:s?[s]:void 0,AssetFileHashes:(r==null?void 0:r.map(h=>parseInt(h,16)))??void 0,AssetFileTypes:t||void 0,UnitIds:o||void 0}})}).data,i=ee({...Ns({query:{ListAll:!0}}),select:h=>{var C;return((C=h==null?void 0:h.items.filter(u=>u.units).flatMap(u=>u.units))==null?void 0:C.map(u=>({label:u.nameEnglish??"-",value:u.unitId.toString()})))??[]}});let l=Ne.find(h=>h.id==="unitId");l!=null&&l.meta&&(l.meta.options=i.data);const{table:m}=_s({data:(d==null?void 0:d.items)??[],columns:Ne,initialState:{columnPinning:{right:["actions"]},pagination:{pageIndex:1,pageSize:5}},pageCount:(d==null?void 0:d.totalPages)??0,shallow:!1});return e.jsx(Ds,{table:m,children:e.jsx(ks,{table:m,children:e.jsx(ha,{table:m})})})},ba=({patchId:s})=>{const a=ee({...Is({path:{id:!s||s==="All"?"Base":s}})}),n=!s||s==="All"?void 0:a.data;return e.jsx(e.Fragment,{children:e.jsxs(H,{children:[e.jsx(W,{className:"px-7",children:e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsxs("div",{children:[e.jsx(hs,{children:I[s]}),e.jsxs(xs,{className:"pt-2",children:["Cumulative asset index:",(n==null?void 0:n.cumulativeAssetIndex)??"-"]})]}),s!=="All"&&e.jsxs("div",{className:"sm:space-x-1 space-y-1",children:[e.jsx(Gs,{patchId:s}),e.jsx(Zs,{patchId:s})]})]})}),e.jsx(T,{children:e.jsx(va,{patchId:s==="All"?void 0:s})})]})})},Ya=function(){const{patchId:a}=us.useParams();return e.jsx(ba,{patchId:a})};export{Ya as component};
