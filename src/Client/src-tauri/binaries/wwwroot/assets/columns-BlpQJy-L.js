import{j as e,b,S as x,a1 as r,ag as f,ah as w,ai as S,aj as C,ak as D}from"./index-_vJHe0oM.js";import{H}from"./hash-input-BmZZ7wAd.js";import{x as j,m as y,n as v,o as N,q as M,r as F,s as T,t as z,v as A,D as P}from"./react-icons.esm-CMH9-wE8.js";import{A as U,Z as O,S as R,a as k,b as K,c as E,d as I,e as L,f as B,g as V,L as m}from"./AutoForm-Ct6SXXji.js";import{u as Z}from"./use-media-query-DN786i_c.js";import{u}from"./useMutation-0UaTLUn9.js";import{E as q,F as Q}from"./react-query.gen-KD5ZsEyq.js";const G=new O(j),p=({data:s,onSubmit:a,children:t})=>e.jsx(U,{schema:G,defaultValues:s,onSubmit:n=>{a(s?{...n,hash:n.hash}:n)},formProps:{className:"px-2 overflow-auto"},withSubmit:!t,children:t}),J=({data:s,triggerButton:a,...t})=>{const[n,i]=b.useState(!1),c=u({...q(),onSuccess:()=>()=>i(!1)}),h=u({...Q(),onSuccess:()=>()=>i(!1)}),o=c.isPending||h.isPending,d=l=>{s?h.mutate({path:{hash:l.hash},body:l}):c.mutate({body:l})};return Z("(min-width: 640px)")?e.jsxs(R,{open:n,onOpenChange:i,...t,children:[e.jsx(k,{asChild:!0,children:a??e.jsx(e.Fragment,{})}),e.jsxs(K,{className:"flex flex-col gap-6 sm:max-w-md",children:[e.jsxs(E,{className:"text-left",children:[e.jsx(I,{children:s?"Update":"Create"}),e.jsxs(L,{children:[s?"Update existing":"Create new"," hitbox entry"]})]}),e.jsx(x,{}),e.jsx(p,{data:s,onSubmit:d,children:e.jsxs(B,{className:"gap-2 pt-2 sm:space-x-0",children:[e.jsx(V,{asChild:!0,children:e.jsx(r,{type:"button",variant:"outline",children:"Cancel"})}),e.jsxs(r,{disabled:o,children:[o&&e.jsx(m,{className:"mr-2 size-4 animate-spin","aria-hidden":"true"}),"Save"]})]})})]})]}):e.jsxs(y,{open:n,onOpenChange:i,...t,children:[e.jsx(v,{asChild:!0,autoFocus:t.open,children:a??e.jsx(e.Fragment,{})}),e.jsxs(N,{className:"flex flex-col gap-6 sm:max-w-md h-full",children:[e.jsxs(M,{className:"text-left",children:[e.jsx(F,{children:"Update stats group details"}),e.jsx(T,{children:"Update the stats group details and save the changes"})]}),e.jsx(x,{}),e.jsx(p,{data:s,onSubmit:d,children:e.jsxs(z,{className:"gap-2 pt-2 sm:space-x-0",children:[e.jsx(A,{asChild:!0,children:e.jsx(r,{type:"button",variant:"outline",children:"Cancel"})}),e.jsxs(r,{disabled:o,children:[o&&e.jsx(m,{className:"mr-2 size-4 animate-spin","aria-hidden":"true"}),"Save"]})]})})]})]})},W=({data:s})=>e.jsx(e.Fragment,{children:e.jsxs(f,{children:[e.jsx(w,{asChild:!0,children:e.jsx("div",{children:e.jsx(r,{"aria-label":"Open menu",variant:"ghost",className:"flex size-8 p-0 data-[state=open]:bg-muted",children:e.jsx(P,{className:"size-4","aria-hidden":"true"})})})}),e.jsxs(S,{align:"end",className:"w-40",children:[e.jsx(C,{children:"Actions"}),s.hash&&e.jsx(J,{data:s,triggerButton:e.jsx(D,{onSelect:a=>a.preventDefault(),children:"Edit"})})]})]})}),g=[{id:"hash",accessorKey:"hash",cell:({row:s})=>e.jsx(H,{className:"border-none",initialValue:s.original.hash,readonly:!0,initialMode:"hex"}),meta:{label:"Hash",variant:"text",placeholder:"Search by Hash (Hex)"},enableColumnFilter:!0}],X=g.map(s=>s.accessorKey),re=[...g,...Object.keys(j.shape).filter(s=>!X.includes(s)).map(s=>({accessorKey:s,header:s})),{id:"actions",size:40,cell:({row:s})=>{if(s.original.hash)return e.jsx(W,{data:s.original})}}];export{J as U,re as h};
