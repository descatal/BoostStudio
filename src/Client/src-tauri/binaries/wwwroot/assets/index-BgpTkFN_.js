var Oe=n=>{throw TypeError(n)};var ue=(n,t,s)=>t.has(n)||Oe("Cannot "+s);var h=(n,t,s)=>(ue(n,t,"read from private field"),s?s.call(n):t.get(n)),P=(n,t,s)=>t.has(n)?Oe("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,s),C=(n,t,s,r)=>(ue(n,t,"write to private field"),r?r.call(n,s):t.set(n,s),s),j=(n,t,s)=>(ue(n,t,"access private method"),s);import{d as Je,n as fe,e as Ze,f as Xe,r as o,g as et,h as Ie,j as c,i as I,c as q,k as tt}from"./index-_vJHe0oM.js";import{C as st,b as rt,c as it,d as nt,a as ot}from"./card-5a8OwMZI.js";import{Q as Ae,u as at,a as lt,e as dt,b as ct,c as ut,s as Ne,f as Se,w as ft,g as bt}from"./suspense-CFdXitkI.js";import{u as ht}from"./useMutation-0UaTLUn9.js";import{b as pt,p as mt}from"./react-query.gen-KD5ZsEyq.js";import{u as De,c as D}from"./composition-D2Mlinab.js";import{E as Pe}from"./enhanced-button-CUT0MAbl.js";import{L as je}from"./label-5eQ_BX-X.js";function Me(n,t){return n.filter(s=>!t.includes(s))}function yt(n,t,s){const r=n.slice(0);return r[t]=s,r}var B,k,_,H,O,A,U,G,W,x,be,he,pe,me,ye,Te,gt=(Te=class extends Je{constructor(t,s,r){super();P(this,x);P(this,B);P(this,k);P(this,_);P(this,H);P(this,O);P(this,A);P(this,U);P(this,G);P(this,W,[]);C(this,B,t),C(this,H,r),C(this,_,[]),C(this,O,[]),C(this,k,[]),this.setQueries(s)}onSubscribe(){this.listeners.size===1&&h(this,O).forEach(t=>{t.subscribe(s=>{j(this,x,me).call(this,t,s)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,h(this,O).forEach(t=>{t.destroy()})}setQueries(t,s){C(this,_,t),C(this,H,s),fe.batch(()=>{const r=h(this,O),i=j(this,x,pe).call(this,h(this,_));C(this,W,i),i.forEach(d=>d.observer.setOptions(d.defaultedQueryOptions));const e=i.map(d=>d.observer),a=e.map(d=>d.getCurrentResult()),f=e.some((d,l)=>d!==r[l]);r.length===e.length&&!f||(C(this,O,e),C(this,k,a),this.hasListeners()&&(Me(r,e).forEach(d=>{d.destroy()}),Me(e,r).forEach(d=>{d.subscribe(l=>{j(this,x,me).call(this,d,l)})}),j(this,x,ye).call(this)))})}getCurrentResult(){return h(this,k)}getQueries(){return h(this,O).map(t=>t.getCurrentQuery())}getObservers(){return h(this,O)}getOptimisticResult(t,s){const r=j(this,x,pe).call(this,t),i=r.map(e=>e.observer.getOptimisticResult(e.defaultedQueryOptions));return[i,e=>j(this,x,he).call(this,e??i,s),()=>j(this,x,be).call(this,i,r)]}},B=new WeakMap,k=new WeakMap,_=new WeakMap,H=new WeakMap,O=new WeakMap,A=new WeakMap,U=new WeakMap,G=new WeakMap,W=new WeakMap,x=new WeakSet,be=function(t,s){return s.map((r,i)=>{const e=t[i];return r.defaultedQueryOptions.notifyOnChangeProps?e:r.observer.trackResult(e,a=>{s.forEach(f=>{f.observer.trackProp(a)})})})},he=function(t,s){return s?((!h(this,A)||h(this,k)!==h(this,G)||s!==h(this,U))&&(C(this,U,s),C(this,G,h(this,k)),C(this,A,Ze(h(this,A),s(t)))),h(this,A)):t},pe=function(t){const s=new Map(h(this,O).map(i=>[i.options.queryHash,i])),r=[];return t.forEach(i=>{const e=h(this,B).defaultQueryOptions(i),a=s.get(e.queryHash);a?r.push({defaultedQueryOptions:e,observer:a}):r.push({defaultedQueryOptions:e,observer:new Ae(h(this,B),e)})}),r},me=function(t,s){const r=h(this,O).indexOf(t);r!==-1&&(C(this,k,yt(h(this,k),r,s)),j(this,x,ye).call(this))},ye=function(){var t;if(this.hasListeners()){const s=h(this,A),r=j(this,x,be).call(this,h(this,k),h(this,W)),i=j(this,x,he).call(this,r,(t=h(this,H))==null?void 0:t.combine);s!==i&&fe.batch(()=>{this.listeners.forEach(e=>{e(h(this,k))})})}},Te);function vt({queries:n,...t},s){const r=Xe(),i=at(),e=lt(),a=o.useMemo(()=>n.map(u=>{const g=r.defaultQueryOptions(u);return g._optimisticResults=i?"isRestoring":"optimistic",g}),[n,r,i]);a.forEach(u=>{dt(u),ct(u,e)}),ut(e);const[f]=o.useState(()=>new gt(r,a,t)),[d,l,y]=f.getOptimisticResult(a,t.combine),M=!i&&t.subscribed!==!1;o.useSyncExternalStore(o.useCallback(u=>M?f.subscribe(fe.batchCalls(u)):et,[f,M]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),o.useEffect(()=>{f.setQueries(a,t)},[a,t,f]);const p=d.some((u,g)=>Ne(a[g],u))?d.flatMap((u,g)=>{const m=a[g];if(m){const E=new Ae(r,m);if(Ne(m,u))return Se(m,E,e);ft(u,i)&&Se(m,E,e)}return[]}):[];if(p.length>0)throw Promise.all(p);const N=d.find((u,g)=>{const m=a[g];return m&&bt({result:u,errorResetBoundary:e,throwOnError:m.throwOnError,query:r.getQueryCache().get(m.queryHash),suspense:m.suspense})});if(N!=null&&N.error)throw N.error;return l(y())}const xt=Ie("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Ct=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function Et(n){const{control:t,value:s,checked:r,bubbles:i=!0,type:e="hidden",style:a,...f}=n,d=o.useMemo(()=>e==="checkbox"||e==="radio"||e==="switch",[e]),l=o.useRef(null),y=o.useRef({value:d?r:s,previous:d?r:s}),M=o.useMemo(()=>{const u=d?r:s;return y.current.value!==u&&(y.current.previous=y.current.value,y.current.value=u),y.current.previous},[d,s,r]),[T,p]=o.useState({});o.useLayoutEffect(()=>{if(!t){p({});return}if(p({width:t.offsetWidth,height:t.offsetHeight}),typeof window>"u")return;const u=new ResizeObserver(g=>{if(!Array.isArray(g)||!g.length)return;const m=g[0];if(!m)return;let E,S;if("borderBoxSize"in m){const b=m.borderBoxSize,v=Array.isArray(b)?b[0]:b;E=v.inlineSize,S=v.blockSize}else E=t.offsetWidth,S=t.offsetHeight;p({width:E,height:S})});return u.observe(t,{box:"border-box"}),()=>{u.disconnect()}},[t]),o.useEffect(()=>{const u=l.current;if(!u)return;const g=window.HTMLInputElement.prototype,m=d?"checked":"value",E=d?"click":"input",S=d?r:s,b=d?r:typeof s=="object"&&s!==null?JSON.stringify(s):s,v=Object.getOwnPropertyDescriptor(g,m),V=v==null?void 0:v.set;if(M!==S&&V){const ae=new Event(E,{bubbles:i});V.call(u,b),u.dispatchEvent(ae)}},[M,s,r,i,d]);const N=o.useMemo(()=>({...a,...T.width!==void 0&&T.height!==void 0?T:{},border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"}),[a,T]);return c.jsx("input",{type:e,...f,ref:l,"aria-hidden":d,tabIndex:-1,defaultChecked:d?r:void 0,style:N})}const w="Editable",X="EditableArea",ee="EditablePreview",te="EditableInput",se="EditableTrigger",re="EditableLabel",ie="EditableToolbar",ne="EditableCancel",oe="EditableSubmit",wt={[w]:`\`${w}\` components must be within \`${w}\``,[X]:`\`${X}\` must be within \`${w}\``,[ee]:`\`${ee}\` must be within \`${w}\``,[te]:`\`${te}\` must be within \`${w}\``,[se]:`\`${se}\` must be within \`${w}\``,[re]:`\`${re}\` must be within \`${w}\``,[ie]:`\`${ie}\` must be within \`${w}\``,[ne]:`\`${ne}\` must be within \`${w}\``,[oe]:`\`${oe}\` must be within \`${w}\``},Rt=o.createContext(void 0);function kt(n){const t=o.useContext(Rt);return n??t??"ltr"}const ge=o.createContext(null);ge.displayName=w;function L(n){const t=o.useContext(ge);if(!t)throw new Error(wt[n]);return t}const Le=o.forwardRef((n,t)=>{const{defaultValue:s="",value:r,onValueChange:i,defaultEditing:e=!1,editing:a,onEditingChange:f,onCancel:d,onEdit:l,onSubmit:y,onEscapeKeyDown:M,dir:T,maxLength:p,name:N,placeholder:u,triggerMode:g="click",asChild:m,autosize:E=!1,disabled:S,required:b,readOnly:v,invalid:V,className:ae,...Qe}=n,le=o.useId(),ve=o.useId(),xe=o.useId(),Ce=kt(T),F=r!==void 0,[Be,_e]=o.useState(s),z=F?r:Be,Y=o.useRef(z),J=o.useRef(i),de=a!==void 0,[He,Fe]=o.useState(e),Ee=de?a:He,Z=o.useRef(f);o.useEffect(()=>{J.current=i,Z.current=f});const $=o.useCallback(R=>{var K;F||_e(R),(K=J.current)==null||K.call(J,R)},[F]),Q=o.useCallback(R=>{var K;de||Fe(R),(K=Z.current)==null||K.call(Z,R)},[de]);o.useEffect(()=>{F&&r!==Y.current&&(Y.current=r)},[F,r]);const[ce,Ke]=o.useState(null),Ue=De(t,R=>Ke(R)),Ge=ce?!!ce.closest("form"):!0,we=o.useCallback(()=>{const R=Y.current;$(R),Q(!1),d==null||d()},[$,d,Q]),Re=o.useCallback(()=>{Y.current=z,Q(!0),l==null||l()},[z,l,Q]),ke=o.useCallback(R=>{$(R),Q(!1),y==null||y(R)},[$,y,Q]),We=o.useMemo(()=>({id:le,inputId:ve,labelId:xe,defaultValue:s,value:z,onValueChange:$,editing:Ee,onSubmit:ke,onEdit:Re,onCancel:we,onEscapeKeyDown:M,dir:Ce,maxLength:p,placeholder:u,triggerMode:g,autosize:E,disabled:S,readOnly:v,required:b,invalid:V}),[le,ve,xe,s,z,$,Ee,ke,we,Re,M,Ce,p,u,g,E,S,b,v,V]),Ye=m?I:"div";return c.jsxs(ge.Provider,{value:We,children:[c.jsx(Ye,{"data-slot":"editable",...Qe,id:le,ref:Ue,className:q("flex min-w-0 flex-col gap-2",ae)}),Ge&&c.jsx(Et,{type:"hidden",control:ce,name:N,value:z,disabled:S,readOnly:v,required:b})]})});Le.displayName=w;const Ot=o.forwardRef((n,t)=>{const{asChild:s,className:r,children:i,...e}=n,a=L(re),f=s?I:"label";return c.jsx(f,{"data-disabled":a.disabled?"":void 0,"data-invalid":a.invalid?"":void 0,"data-required":a.required?"":void 0,"data-slot":"editable-label",...e,ref:t,id:a.labelId,htmlFor:a.inputId,className:q("font-medium text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 data-required:after:ml-0.5 data-required:after:text-destructive data-required:after:content-['*']",r),children:i})});Ot.displayName=re;const qe=o.forwardRef((n,t)=>{const{asChild:s,className:r,...i}=n,e=L(X),a=s?I:"div";return c.jsx(a,{role:"group","data-disabled":e.disabled?"":void 0,"data-editing":e.editing?"":void 0,"data-slot":"editable-area",dir:e.dir,...i,ref:t,className:q("relative inline-block min-w-0 data-disabled:cursor-not-allowed data-disabled:opacity-50",r)})});qe.displayName=X;const Ve=o.forwardRef((n,t)=>{const{asChild:s,className:r,...i}=n,e=L(ee),a=o.useCallback(()=>{e.disabled||e.readOnly||e.onEdit()},[e.disabled,e.readOnly,e.onEdit]),f=s?I:"div";return e.editing||e.readOnly?null:c.jsx(f,{role:"button","aria-disabled":e.disabled||e.readOnly,"data-empty":e.value?void 0:"","data-disabled":e.disabled?"":void 0,"data-readonly":e.readOnly?"":void 0,"data-slot":"editable-preview",tabIndex:e.disabled||e.readOnly?void 0:0,...i,ref:t,onClick:D(i.onClick,e.triggerMode==="click"?a:void 0),onDoubleClick:D(i.onDoubleClick,e.triggerMode==="dblclick"?a:void 0),onFocus:D(i.onFocus,e.triggerMode==="focus"?a:void 0),className:q("cursor-text truncate rounded-sm border border-transparent py-1 text-base focus-visible:outline-hidden focus-visible:ring-1 focus-visible:ring-ring data-disabled:cursor-not-allowed data-readonly:cursor-default data-empty:text-muted-foreground data-disabled:opacity-50 md:text-sm",r),children:e.value||e.placeholder})});Ve.displayName=ee;const Nt=typeof window<"u"?o.useLayoutEffect:o.useEffect,ze=o.forwardRef((n,t)=>{const{asChild:s,className:r,disabled:i,readOnly:e,required:a,maxLength:f,...d}=n,l=L(te),y=o.useRef(null),M=De(t,y),T=i||l.disabled,p=e||l.readOnly,N=a||l.required,u=o.useCallback(b=>{l.autosize&&(b instanceof HTMLTextAreaElement?(b.style.height="0",b.style.height=`${b.scrollHeight}px`):(b.style.width="0",b.style.width=`${b.scrollWidth+4}px`))},[l.autosize]),g=o.useCallback(b=>{if(p)return;const v=b.relatedTarget;v instanceof HTMLElement&&(v.closest('[data-slot="editable-trigger"]')||v.closest('[data-slot="editable-cancel"]'))||l.onSubmit(l.value)},[l.value,l.onSubmit,p]),m=o.useCallback(b=>{p||(l.onValueChange(b.target.value),u(b.target))},[l.onValueChange,p,u]),E=o.useCallback(b=>{if(!p)if(b.key==="Escape"){const v=b.nativeEvent;if(l.onEscapeKeyDown&&(l.onEscapeKeyDown(v),v.defaultPrevented))return;l.onCancel()}else b.key==="Enter"&&l.onSubmit(l.value)},[l.value,l.onSubmit,l.onCancel,l.onEscapeKeyDown,p]);Nt(()=>{if(!l.editing||p||!y.current)return;const b=window.requestAnimationFrame(()=>{y.current&&(y.current.focus(),y.current.select(),u(y.current))});return()=>{window.cancelAnimationFrame(b)}},[l.editing,p,u]);const S=s?I:"input";return!l.editing&&!p?null:c.jsx(S,{"aria-required":N,"aria-invalid":l.invalid,"data-slot":"editable-input",dir:l.dir,disabled:T,readOnly:p,required:N,...d,id:l.inputId,"aria-labelledby":l.labelId,ref:M,maxLength:f,placeholder:l.placeholder,value:l.value,onBlur:D(d.onBlur,g),onChange:D(d.onChange,m),onKeyDown:D(d.onKeyDown,E),className:q("flex rounded-sm border border-input bg-transparent py-1 text-base shadow-xs transition-colors file:border-0 file:bg-transparent file:font-medium file:text-foreground file:text-sm placeholder:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",l.autosize?"w-auto":"w-full",r)})});ze.displayName=te;const $e=o.forwardRef((n,t)=>{const{asChild:s,forceMount:r=!1,...i}=n,e=L(se),a=o.useCallback(()=>{e.disabled||e.readOnly||e.onEdit()},[e.disabled,e.readOnly,e.onEdit]),f=s?I:"button";return!r&&(e.editing||e.readOnly)?null:c.jsx(f,{type:"button","aria-controls":e.id,"aria-disabled":e.disabled||e.readOnly,"data-disabled":e.disabled?"":void 0,"data-readonly":e.readOnly?"":void 0,"data-slot":"editable-trigger",...i,ref:t,onClick:e.triggerMode==="click"?a:void 0,onDoubleClick:e.triggerMode==="dblclick"?a:void 0})});$e.displayName=se;const St=o.forwardRef((n,t)=>{const{asChild:s,className:r,orientation:i="horizontal",...e}=n,a=L(ie),f=s?I:"div";return c.jsx(f,{role:"toolbar","aria-controls":a.id,"aria-orientation":i,"data-slot":"editable-toolbar",dir:a.dir,...e,ref:t,className:q("flex items-center gap-2",i==="vertical"&&"flex-col",r)})});St.displayName=ie;const Pt=o.forwardRef((n,t)=>{const{asChild:s,...r}=n,i=L(ne),e=s?I:"button";return!i.editing&&!i.readOnly?null:c.jsx(e,{type:"button","aria-controls":i.id,"data-slot":"editable-cancel",...r,onClick:D(r.onClick,()=>{i.onCancel()}),ref:t})});Pt.displayName=ne;const jt=o.forwardRef((n,t)=>{const{asChild:s,...r}=n,i=L(oe),e=s?I:"button";return!i.editing&&!i.readOnly?null:c.jsx(e,{type:"button","aria-controls":i.id,"data-slot":"editable-submit",...r,ref:t,onClick:D(r.onClick,()=>{i.onSubmit(i.value)})})});jt.displayName=oe;const Mt=Le,Tt=({configOptions:n,...t})=>{const s=vt({queries:n.map(e=>({...pt({path:{key:e.key}})})),combine:e=>({data:e.map((a,f)=>({...n[f],data:a.data})),pending:e.some(a=>a.isPending)})}),r=s.data,i=ht({...mt(),onSuccess:()=>{tt.success("Configuration saved successfully!")}});return c.jsx("div",{...t,children:!s.pending&&r.map(e=>c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx(je,{className:"leading-none font-semibold",htmlFor:e.key,children:e.label}),c.jsx(je,{className:"text-muted-foreground text-sm",htmlFor:e.key,children:e.description})]}),c.jsxs("div",{id:e.key,className:"flex items-center gap-2 rounded-lg border bg-card px-2 py-2",children:[c.jsxs(Mt,{defaultValue:e.data??e.defaultValue,onSubmit:a=>{i.mutate({body:{key:e.key,value:a}})},className:"flex flex-1 flex-row items-center gap-1.5",children:[c.jsxs(qe,{className:"flex-1",children:[c.jsx(Ve,{className:q("w-full rounded-md px-1.5 py-1")}),c.jsx(ze,{placeholder:e.defaultValue,className:"px-1.5 py-1"})]}),c.jsx($e,{asChild:!0,children:c.jsx(Pe,{variant:"ghost",size:"icon",className:"size-7",children:c.jsx(xt,{})})})]},e.key),c.jsx(Pe,{variant:"ghost",size:"icon",className:"size-7 text-destructive",onClick:()=>{},children:c.jsx(Ct,{})})]},e.key)]}))})},It=[{label:"Staging Directory",key:"STAGING_DIRECTORY",description:"The `.moddedboost` folder inside your RPCS3 directory.",defaultValue:"/rpcs3/.moddedboost"},{label:"Working Directory",key:"WORKING_DIRECTORY",description:"The working directory to store intermediate asset files.",defaultValue:"/workstation"},{label:"Production Directory",key:"PRODUCTION_DIRECTORY",description:"The directory that stores packed psarc files.",defaultValue:"/rpcs3/dev_hdd0/game/NPJB00512/USRDIR"},{label:"Script Directory",key:"SCRIPT_DIRECTORY",description:"The directory that stores units' scex script files.",defaultValue:"/scripts"}],_t=function(){return c.jsx("div",{className:"flex justify-center w-full",children:c.jsxs(st,{className:"m-8 w-4xl",children:[c.jsxs(rt,{children:[c.jsx(it,{className:"text-2xl",children:"Settings"}),c.jsx(nt,{className:"text-lg",children:"Configure your app settings."})]}),c.jsx(ot,{children:c.jsx(Tt,{className:"flex w-full min-w-0 flex-col gap-6",configOptions:It})})]})})};export{_t as component};
